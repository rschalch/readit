{% load humanize %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Readit: List of books</title>
  </head>
  <body>
    {% if request.user.is_authenticated %}
      <div>Hello {{ request.user.username | title }}</div>
      <div>Your last login was {{ request.user.last_login | date:"D d M Y"}}</div>
    {% else %}
      <div>Welcome guest</div>
    {% endif %}

    <main>
      <h1>{{ books.count|apnumber|title }} book{{ books.count|pluralize }}</h1>

      {% for book in books %}
        <h2>{{ book.title }} by {{ book.list_authors }}</h2>
        {% if book.is_favourite %}
          <span class="highlight">Favourite</span>
        {% endif %}
        <h2>{{ book.review }}</h2>
      {% endfor %}

    </main>
  </body>
</html>